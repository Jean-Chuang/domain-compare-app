<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APPåŸŸåæ¯”å°å·¥å…·</title>
    <style>
        :root {
            --color-primary: #32b8c6;
            --color-success: #22c55e;
            --color-error: #ef4444;
            --color-bg: #f5f5f5;
            --color-surface: #ffffff;
            --color-text: #1f2121;
            --color-border: #e5e5e5;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--color-primary);
        }
        
        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
            }
        }
        
        .input-group {
            background: var(--color-surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--color-primary);
        }
        
        .input-group textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            border: 1px solid var(--color-border);
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            resize: vertical;
        }
        
        .input-group textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(50, 184, 198, 0.1);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-compare {
            background: var(--color-primary);
            color: white;
            flex: 1;
        }
        
        .btn-compare:hover {
            background: #2a9daa;
        }
        
        .btn-clear {
            background: var(--color-error);
            color: white;
        }
        
        .btn-clear:hover {
            background: #dc2626;
        }
        
        .btn-convert {
            background: #8b5cf6;
            color: white;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn-convert:hover {
            background: #7c3aed;
        }
        
        .results-section {
            background: var(--color-surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .results-header {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 20px;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .results-count {
            font-size: 14px;
            color: #666;
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
            overflow-x: auto;
        }
        
        .results-table thead {
            background: #f9f9f9;
            border-bottom: 2px solid var(--color-border);
        }
        
        .results-table th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: var(--color-primary);
        }
        
        .results-table td {
            padding: 12px;
            border-bottom: 1px solid var(--color-border);
            word-break: break-all;
        }
        
        .results-table tbody tr:hover {
            background: #f5f5f5;
        }
        
        .status-success {
            color: var(--color-success);
            font-weight: 600;
        }
        
        .status-diff {
            color: var(--color-error);
            font-weight: 600;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }
        
        .copy-btn {
            background: #e5e5e5;
            color: var(--color-text);
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            border-radius: 3px;
            transition: background 0.2s;
        }
        
        .copy-btn:hover {
            background: #d4d4d4;
        }
        
        .scroll-wrapper {
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” APPåŸŸåæ¯”å°å·¥å…·</h1>
        
        <div class="input-section">
            <div class="input-group">
                <label>æ­¥é©Ÿ 1ï¼šè²¼ä¸Šé€—è™Ÿåˆ†éš”çš„ APP ç¶²å€åˆ—è¡¨</label>
                <textarea id="urlInput" placeholder="https://yfsf.note-book-a201.top,https://pty.if818-zip9yf152.to,..."></textarea>
                <button class="btn-convert" onclick="convertUrls()">è½‰æ›ç‚º APP åŸŸååˆ—è¡¨</button>
            </div>
            <div class="input-group">
                <label>APP åŸŸååˆ—è¡¨ï¼ˆè½‰æ›çµæœï¼‰</label>
                <textarea id="appList" placeholder="è½‰æ›å¾Œçš„åŸŸåæœƒé¡¯ç¤ºåœ¨é€™è£¡..."></textarea>
            </div>
        </div>
        
        <div class="input-section">
            <div class="input-group">
                <label>è²¼ä¸Šå®˜æ–¹åŸŸååˆ—è¡¨ï¼ˆæ¯è¡Œä¸€å€‹ï¼‰</label>
                <textarea id="domainList" placeholder="ogqay67nm.0222506.xyz&#10;https://45.192.210.100:48911&#10;..."></textarea>
            </div>
        </div>
        
        <div class="button-group">
            <button class="btn-compare" onclick="compareData()">æ­¥é©Ÿ 2ï¼šAPPç¶å®šåŸŸå vs åŸŸåè¡¨</button>
            <button class="btn-clear" onclick="clearAll()">æ¸…é™¤å…¨éƒ¨</button>
        </div>
        
        <div class="results-section">
            <div class="results-header">
                <h2>æ¯”å°çµæœ</h2>
                <div class="results-count" id="countInfo"></div>
            </div>
            
            <div id="resultsContainer" class="empty-state">
                å°šæœªé€²è¡Œæ¯”å°ï¼Œè«‹å…ˆè²¼ä¸Š APP åŸŸåå’Œå®˜æ–¹åŸŸåçš„æ•¸æ“š
            </div>
        </div>
    </div>

    <script>
        function convertUrls() {
            const urlInput = document.getElementById('urlInput').value;
            
            if (!urlInput.trim()) {
                alert('è«‹å…ˆè²¼ä¸Šé€—è™Ÿåˆ†éš”çš„ç¶²å€åˆ—è¡¨');
                return;
            }
            
            // ç§»é™¤ https:// ä¸¦ä»¥é€—è™Ÿåˆ†å‰²
            const cleaned = urlInput.replace(/https:\/\//g, '');
            const items = cleaned.split(',');
            const values = items
                .map(item => item.trim())
                .filter(item => item.length > 0);
            
            // é¡¯ç¤ºåˆ° APP åŸŸååˆ—è¡¨
            document.getElementById('appList').value = values.join('\n');
            console.log('æˆåŠŸè½‰æ› ' + values.length + ' å€‹åŸŸå');
        }
        
        function normalizeData(text) {
            // å°‡æ¯è¡Œè³‡æ–™æ¨™æº–åŒ–
            return text
                .split('\n')
                .map(line => line.trim())
                .filter(line => line.length > 0)
                .map(line => {
                    // ç§»é™¤ https:// æˆ– http:// å‰ç¶´
                    line = line.replace(/^https?:\/\//i, '');
                    // ç§»é™¤å†’è™Ÿå¾Œçš„å…§å®¹ï¼ˆç«¯å£è™Ÿï¼‰
                    if (line.indexOf(':') !== -1) {
                        line = line.substring(0, line.indexOf(':'));
                    }
                    return line;
                });
        }

        function compareData() {
            const appText = document.getElementById('appList').value;
            const domainText = document.getElementById('domainList').value;

            if (!appText.trim() || !domainText.trim()) {
                alert('è«‹åœ¨å…©å€‹æ¬„ä½éƒ½è²¼ä¸Šæ•¸æ“š');
                return;
            }

            const appList = normalizeData(appText);
            const domainList = normalizeData(domainText);

            const results = [];

            // A æœ‰ä½† B ç„¡
            for (let item of appList) {
                if (!domainList.includes(item)) {
                    results.push({
                        content: item,
                        status: 'APPYES/åŸŸåè¡¨NO',
                        type: 'diff'
                    });
                }
            }

            // B æœ‰ä½† A ç„¡
            for (let item of domainList) {
                if (!appList.includes(item)) {
                    results.push({
                        content: item,
                        status: 'APPNO/åŸŸåè¡¨YES',
                        type: 'diff'
                    });
                }
            }

            // é¡¯ç¤ºçµæœ
            displayResults(results, appList.length, domainList.length);
        }

        function displayResults(results, appCount, domainCount) {
            const container = document.getElementById('resultsContainer');
            const countInfo = document.getElementById('countInfo');

            if (results.length === 0) {
                container.innerHTML = '<div class="empty-state"><strong class="status-success">âœ“ å…©é‚Šç„¡å·®ç•° ğŸ‘</strong></div>';
                countInfo.textContent = `APP åŸŸå: ${appCount} | å®˜æ–¹åŸŸå: ${domainCount} | å·®ç•°: 0`;
                return;
            }

            let html = `
                <div class="scroll-wrapper">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>å·®ç•°å…§å®¹</th>
                                <th>å·®ç•°é¡å‹</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            results.forEach((result, index) => {
                html += `
                    <tr>
                        <td>${escapeHtml(result.content)}</td>
                        <td><span class="status-diff">${result.status}</span></td>
                        <td><button class="copy-btn" onclick="copyToClipboard('${escapeHtml(result.content, true)}')">è¤‡è£½</button></td>
                    </tr>
                `;
            });

            html += `
                        </tbody>
                    </table>
                </div>
            `;

            container.innerHTML = html;
            countInfo.textContent = `APP åŸŸå: ${appCount} | å®˜æ–¹åŸŸå: ${domainCount} | å·®ç•°æ•¸: ${results.length}`;
        }

        function escapeHtml(text, forJs = false) {
            if (forJs) {
                return text.replace(/'/g, "\\'");
            }
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('å·²è¤‡è£½åˆ°å‰ªè²¼æ¿');
            });
        }

        function clearAll() {
            document.getElementById('appList').value = '';
            document.getElementById('domainList').value = '';
            document.getElementById('resultsContainer').innerHTML = 'å°šæœªé€²è¡Œæ¯”å°ï¼Œè«‹å…ˆè²¼ä¸Šæ•¸æ“šä¸¦é»æ“Šã€ŒåŸ·è¡Œæ¯”å°ã€';
            document.getElementById('countInfo').textContent = '';
        }
    </script>
</body>
</html>
